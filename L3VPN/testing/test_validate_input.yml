# Validates all the inputs in the various vars files that everything is based on.
---
  - name: "Including variables for '{{ scenario }}'"
    include_vars: 
      dir: scenario/{{ scenario }}
      extensions:
        - yml
        - yaml
      ignore_unknown_extensions: yes
      ignore_files:
        - expected_nodes.yml
        - output_nodes.yml

  - name: Validate that all nodes are connected via fabric
    assert:
      that:
        - "nodes|nodes_not_in_fabric(fabric_infrastructure, fabric_customer)|length == 0"
    tags: fabric_connected

  - name: Validate that there is enough linknets for the fabric
    assert:
      that:
        - "(fabric_infrastructure|length + fabric_customer|length) == linknet.fabric_linknets|length"
    tags: enough_linknets

    